<div class="game-container">
  <!-- Menu principal Final Fantasy Tactics -->
  <div class="main-menu" *ngIf="isHomePage()">
    <div class="menu-content">
      <div class="menu-header">
        <div class="menu-title" [class.animated]="titleAnimation()">AETHER ENGINE</div>
        <div class="menu-subtitle">~ TACTICAL CHRONICLES ~</div>
      </div>
      
      <div class="menu-buttons">
        <button [routerLink]="['/nouvelle-partie']" class="menu-btn">Nouvelle partie</button>
        <button [routerLink]="['/continuer']" class="menu-btn">Continuer</button>
        <button [routerLink]="['/options']" class="menu-btn">Options</button>
        <button [routerLink]="['/quitter']" class="menu-btn">Quitter</button>
      </div>
      
      <div class="menu-footer">
        <div class="api-status" [class.connected]="isApiConnected()" [class.disconnected]="!isApiConnected()">
          {{ isApiConnected() ? 'ðŸŸ¢ Serveur connectÃ©' : 'ðŸ”´ Serveur dÃ©connectÃ©' }}
        </div>
        <div class="menu-instructions">Utilisez les flÃ¨ches ou cliquez pour naviguer</div>
        <div class="menu-version">Version 1.0.0 - Â© 2026 Aether Engine</div>
      </div>
    </div>
  </div>

  <!-- Navigation en jeu FF Tactics -->
  <nav class="main-nav" *ngIf="canNavigate() && gameState().isInGame">
    <div class="nav-left">
      <span class="player-name">{{ playerName() }}</span>
      <div class="level-badge">{{ playerLevel() }}</div>
      
      <!-- Barres de stats -->
      <div class="stat-block hp">
        <span class="stat-label">HP</span>
        <div class="bar">
          <div class="fill" [style.width.%]="hpPercentage()"></div>
        </div>
        <span class="stat-text">{{ playerHP().current }}/{{ playerHP().max }}</span>
      </div>
      
      <div class="stat-block mp">
        <span class="stat-label">MP</span>
        <div class="bar">
          <div class="fill" [style.width.%]="mpPercentage()"></div>
        </div>
        <span class="stat-text">{{ playerMP().current }}/{{ playerMP().max }}</span>
      </div>
    </div>

    <div class="nav-center">
      <button class="nav-button" [class.active]="gameState().currentScreen === 'combat'">Combat</button>
      <button class="nav-button" [class.active]="gameState().currentScreen === 'character'">Personnage</button>
      <button class="nav-button" [class.active]="gameState().currentScreen === 'inventory'">Inventaire</button>
      <button class="nav-button" [class.active]="gameState().currentScreen === 'world'">Monde</button>
      <button class="nav-button" [class.active]="gameState().currentScreen === 'market'">MarchÃ©</button>
    </div>

    <div class="nav-right">
      <div class="gold-display">{{ currentGold() }}</div>
      <button class="logout-button">Quitter</button>
    </div>
  </nav>

  <!-- Overlay de chargement FF Tactics -->
  <div class="loading-overlay" *ngIf="gameState().isLoading">
    <div class="loading-spinner"></div>
    <p>Chargement en cours...</p>
  </div>

  <!-- BanniÃ¨re d'erreur FF Tactics -->
  <div class="error-banner" *ngIf="gameState().error">
    <span>{{ gameState().error }}</span>
    <button (click)="gameStateService.setError(null)">Ã—</button>
  </div>

  <!-- Contenu principal -->
  <main class="game-content" [class.has-nav]="canNavigate() && gameState().isInGame">
    <router-outlet></router-outlet>
  </main>
</div>