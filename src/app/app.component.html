<div class="game-container">
  <!-- Interface de navigation principale -->
  <nav class="main-nav" *ngIf="canNavigate()">
    <div class="nav-left">
      <h1 class="game-title">{{ title }}</h1>
      <div class="player-info" *ngIf="playerStats()">
        <span class="player-level">Niveau {{ playerStats()!.level }}</span>
        <div class="player-stats">
          <div class="stat-bar hp">
            <span class="stat-label">HP</span>
            <div class="bar">
              <div class="fill" [style.width.%]="(playerStats()!.hp / playerStats()!.hpMax) * 100"></div>
            </div>
            <span class="stat-text">{{ playerStats()!.hp }}/{{ playerStats()!.hpMax }}</span>
          </div>
          <div class="stat-bar mp">
            <span class="stat-label">MP</span>
            <div class="bar">
              <div class="fill" [style.width.%]="(playerStats()!.mp / playerStats()!.mpMax) * 100"></div>
            </div>
            <span class="stat-text">{{ playerStats()!.mp }}/{{ playerStats()!.mpMax }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="nav-center">
      <div class="nav-buttons">
        <button 
          class="nav-button" 
          [class.active]="gameState().currentScreen === 'combat'"
          (click)="navigateToScreen('combat')"
          [disabled]="!canNavigate()">
          Combat
        </button>
        <button 
          class="nav-button" 
          [class.active]="gameState().currentScreen === 'character'"
          (click)="navigateToScreen('character')"
          [disabled]="!canNavigate()">
          Personnage
        </button>
        <button 
          class="nav-button" 
          [class.active]="gameState().currentScreen === 'inventory'"
          (click)="navigateToScreen('inventory')"
          [disabled]="!canNavigate()">
          Inventaire
        </button>
        <button 
          class="nav-button" 
          [class.active]="gameState().currentScreen === 'world'"
          (click)="navigateToScreen('world')"
          [disabled]="!canNavigate()">
          Monde
        </button>
        <button 
          class="nav-button" 
          [class.active]="gameState().currentScreen === 'market'"
          (click)="navigateToScreen('market')"
          [disabled]="!canNavigate()">
          Marché
        </button>
      </div>
    </div>

    <div class="nav-right">
      <div class="gold-display" *ngIf="playerStats()">
        <span class="gold-amount">{{ playerStats()!.gold | number }} PO</span>
      </div>
      <button class="logout-button" (click)="logout()">
        Déconnexion
      </button>
    </div>
  </nav>

  <!-- Indicateur de chargement global -->
  <div class="loading-overlay" *ngIf="gameState().isLoading">
    <div class="loading-spinner"></div>
    <p>Chargement...</p>
  </div>

  <!-- Affichage des erreurs -->
  <div class="error-banner" *ngIf="gameState().error">
    <span>{{ gameState().error }}</span>
    <button (click)="gameStateService.setError(null)">×</button>
  </div>

  <!-- Contenu principal -->
  <main class="game-content" [class.has-nav]="canNavigate()">
    <router-outlet></router-outlet>
  </main>
</div>